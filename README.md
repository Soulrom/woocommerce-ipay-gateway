# WooCommerce iPay Tokly Gateway

Плагін для інтеграції WooCommerce з платіжним шлюзом iPay Tokly.

## Опис

Цей плагін додає можливість оплати через iPay Tokly в магазин WooCommerce. Підтримує роботу з реальними платежами та тестовим середовищем (sandbox).

## Встановлення

1. Завантажте папку `woocommerce-ipay-gateway` в директорію `/wp-content/plugins/`
2. Активуйте плагін через меню 'Plugins' в WordPress
3. Перейдіть до WooCommerce → Settings → Payments
4. Знайдіть 'iPay Tokly' у списку способів оплати та натисніть 'Manage'

## Налаштування

### Обов'язкові поля

- **Merchant ID** - ваш ID мерчанта в системі iPay
- **Sign Key** - ключ для підпису запитів
- **Return URL** - публічний HTTPS URL для повернення клієнта після оплати

### Додаткові налаштування

- **Success URL** - URL для успішної оплати (якщо не вказано - використовується Return URL)
- **Fail URL** - URL для неуспішної оплати (якщо не вказано - використовується Return URL)
- **Language** - мова сторінок Tokly (ua, ru, en)
- **Lifetime** - час життя платежу в секундах або годинах

### Тестування (Sandbox)

1. Увімкніть "Sandbox Mode" в налаштуваннях
2. Використовуйте тестові картки:
   - Успішна оплата: 3333333333333331
   - Успішна оплата до 100 грн: 3333333333333430
   - Неуспішна оплата: 3333333333333349
   - Предавторизація: 3333333333333356

### Режим налагодження

Увімкніть "Debug Mode" для перегляду XML запитів та відповідей під час оплати.

## Технічні деталі

- Версія API: 1.40
- Endpoint: https://tokly.ipay.ua/api302
- Формат: XML через POST запит
- Метод: PaymentCreate
- Суми передаються в копійках
- Підтримка HTTPS обов'язкова

## Безпека

- Всі URL мають бути HTTPS
- Sign Key повинен зберігатися в безпеці
- Рекомендується регулярно оновлювати плагін

## Підтримка

При виникненні проблем:

1. Увімкніть Debug Mode
2. Перевірте логи помилок
3. Зверніться до документації iPay
4. Зв'яжіться з підтримкою iPay

## Ліцензія

[MIT License](LICENSE)
